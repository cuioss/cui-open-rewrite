= cui-open-rewrite

== Status

image:https://github.com/cuioss/cui-open-rewrite/actions/workflows/maven.yml/badge.svg[Java CI with Maven,link=https://github.com/cuioss/cui-open-rewrite/actions/workflows/maven.yml]
image:http://img.shields.io/:license-apache-blue.svg[License,link=http://www.apache.org/licenses/LICENSE-2.0.html]
image:https://img.shields.io/maven-central/v/de.cuioss.rewrite/cui-open-rewrite.svg?label=Maven%20Central["Maven Central", link="https://central.sonatype.com/artifact/de.cuioss.rewrite/cui-open-rewrite"]

https://sonarcloud.io/summary/new_code?id=cuioss_cui-open-rewrite[image:https://sonarcloud.io/api/project_badges/measure?project=cuioss_cui-open-rewrite&metric=alert_status[Quality
Gate Status]]
image:https://sonarcloud.io/api/project_badges/measure?project=cuioss_cui-open-rewrite&metric=ncloc[Lines of Code,link=https://sonarcloud.io/summary/new_code?id=cuioss_cui-open-rewrite]
image:https://sonarcloud.io/api/project_badges/measure?project=cuioss_cui-open-rewrite&metric=coverage[Coverage,link=https://sonarcloud.io/summary/new_code?id=cuioss_cui-open-rewrite]


https://cuioss.github.io/cui-java-module-template/about.html[Generated Documentation on github-pages]

== What is it?

Custom OpenRewrite recipes for CUI-OSS projects that enforce specific code formatting standards not available in existing OpenRewrite recipes.

=== Features

==== AnnotationNewlineFormat Recipe

Ensures that Java annotations are formatted on separate lines for better readability.

**Effect:**

* Class-level annotations (e.g., `@UtilityClass`, `@Slf4j`) are placed on separate lines
* Method-level annotations (e.g., `@Override`, `@Test`) are placed on separate lines  
* Field-level annotations are placed on separate lines
* Multiple annotations are each placed on their own line

**Example transformation:**
[source,java]
----
// Before
@Data @Builder public class Person {
    @Override public String toString() {
        return "Person";
    }
}

// After
@Data
@Builder
public class Person {
    @Override
    public String toString() {
        return "Person";
    }
}
----

**Known Limitations:**

* Indentation preservation issues in nested classes (see https://github.com/cuioss/cui-open-rewrite/issues/1[Issue #1])
* Some edge cases with field annotations
* 6 tests currently disabled pending indentation fixes

=== Usage

==== With OpenRewrite Maven Plugin

[source,xml]
----
<plugin>
    <groupId>org.openrewrite.maven</groupId>
    <artifactId>rewrite-maven-plugin</artifactId>
    <configuration>
        <activeRecipes>
            <recipe>de.cuioss.rewrite.format.AnnotationNewlineFormat</recipe>
        </activeRecipes>
    </configuration>
    <dependencies>
        <dependency>
            <groupId>de.cuioss.rewrite</groupId>
            <artifactId>cui-open-rewrite</artifactId>
            <version>${cui-open-rewrite.version}</version>
        </dependency>
    </dependencies>
</plugin>
----

==== Run the recipe

[source,bash]
----
mvn rewrite:run
----

=== Maven Coordinates

[source,xml]
----
    <dependency>
        <groupId>de.cuioss.rewrite</groupId>
        <artifactId>cui-open-rewrite</artifactId>
    </dependency>
----

